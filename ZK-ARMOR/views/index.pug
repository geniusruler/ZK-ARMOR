doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title  ZK-ARMOR 
    link(rel='stylesheet', href='/css/styles.css')
  
  body
    // Header
    header.header
      .container
        .header-content
          .logo
            span.logo-icon üõ°Ô∏è
            h1.logo-text ZK-ARMOR 
          
          .wallet-section
            if walletConnected
              .wallet-info
                span.wallet-label Connected:
                span.wallet-address= walletAddress
                button.btn.btn-secondary#disconnectBtn Disconnect
            else
              button.btn.btn-primary#connectWalletBtn Connect Lace Wallet

    // Navigation Tabs
    nav.tabs
      .container
        button.tab(data-tab='a2d') üõ°Ô∏è A2D Verification
        button.tab.active(data-tab='register') Register Model
        button.tab(data-tab='verify') Verify Model

    // Main Content
    main.main-content
      .container
        
        //- ============================================
        //- ‚úÖ NEW: A2D VERIFICATION SECTION
        //- ============================================
        section#a2dSection.tab-content
          .card
            h2.card-title
              span.icon üõ°Ô∏è
              | A2D Backdoor Detection
            
            p.description
              | Verify your AI model for backdoors and poisoning attacks using the 
              strong Attack-to-Defend (A2D) algorithm.
              br
              | Upload your model to check for trojan patterns and adversarial vulnerabilities.
            
            .form-section
              .file-upload-area#a2dDropZone
                .upload-icon üìÅ
                p.upload-text
                  | Drop your model file here or 
                  label.file-label
                    | click to browse
                    input#a2dFileInput(type='file', accept='.onnx,.json')
                p.upload-hint Supported: ONNX (.onnx), TensorFlow.js (.json)
              
              #a2dFileInfo.file-info(style='display:none')
                .info-item
                  span.label File Name:
                  span#a2dFileName.value -
                .info-item
                  span.label File Size:
                  span#a2dFileSize.value -
                
                .warning-box
                  span.warning-icon ‚ö†Ô∏è
                  | Your model will be analyzed for backdoors and poisoning attacks.
                
                #a2dProgress.progress-section(style='display:none')
                  .progress-bar
                    .progress-fill#a2dProgressBar
                  p#a2dProgressText.progress-text Running A2D verification...
                
                button#a2dSubmitBtn.btn.btn-primary.btn-large(disabled) Run A2D Verification
              
              #a2dResult.result-section(style='display:none')
                // Result will be injected here

        // Register Model Section
        section#registerSection.tab-content.active
          .card
            h2.card-title
              span.icon üì§
              | Register Your AI Model
            
            p.description
              | Register your AI model on the blockchain with zero-knowledge proof verification.
              br
              strong Your model file never leaves your computer!
            
            .form-section
              .file-upload-area#registerDropZone
                .upload-icon üìÅ
                p.upload-text
                  | Drop your model file here or 
                  label.file-label
                    | click to browse
                    input#registerFileInput(type='file', accept='.pkl,.pt,.pth,.safetensors,.onnx,.h5')
                p.upload-hint Supported formats: PyTorch (.pt, .pth), SafeTensors, ONNX, HDF5
              
              #registerFileInfo.file-info(style='display:none')
                .info-item
                  span.label File Name:
                  span#registerFileName.value -
                .info-item
                  span.label File Size:
                  span#registerFileSize.value -
                .info-item
                  span.label Model Hash:
                  span#registerFileHash.value Computing...
                
                .warning-box
                  span.warning-icon ‚ö†Ô∏è
                  | Your model will NOT be uploaded. Only a cryptographic hash and zero-knowledge proof will be sent to the blockchain.
                
                //- ‚úÖ NEW: Option to run A2D before registering
                .form-group
                  label
                    input#runA2DBeforeRegister(type='checkbox')
                    |  Run A2D backdoor detection before registering
                
                .form-group
                  label(for='creatorName') Creator/Organization Name (Optional)
                  input#creatorName.input(type='text', placeholder='e.g., Your Lab Name')
                
                .form-group
                  label(for='modelDescription') Model Description (Optional)
                  textarea#modelDescription.input(rows='3', placeholder='Brief description of your model...')
                
                #registerProgress.progress-section(style='display:none')
                  .progress-bar
                    .progress-fill#registerProgressBar
                  p#registerProgressText.progress-text Computing hash...
                
                button#registerSubmitBtn.btn.btn-primary.btn-large(disabled) Register Model

        // Verify Model Section
        section#verifySection.tab-content
          .card
            h2.card-title
              span.icon üîç
              | Verify AI Model Integrity
            
            p.description
              | Check if a model has been registered and verified on the blockchain.
              br
              | This helps you ensure the model hasn't been tampered with.
            
            .form-section
              .file-upload-area#verifyDropZone
                .upload-icon üìÅ
                p.upload-text
                  | Drop your downloaded model file here or 
                  label.file-label
                    | click to browse
                    input#verifyFileInput(type='file', accept='.pkl,.pt,.pth,.safetensors,.onnx,.h5')
              
              #verifyFileInfo.file-info(style='display:none')
                .info-item
                  span.label File Name:
                  span#verifyFileName.value -
                .info-item
                  span.label File Size:
                  span#verifyFileSize.value -
                .info-item
                  span.label Computing Hash:
                  span#verifyFileHash.value Please wait...
                
                #verifyProgress.progress-section(style='display:none')
                  .progress-bar
                    .progress-fill#verifyProgressBar
                  p#verifyProgressText.progress-text Computing hash...
                
                button#verifySubmitBtn.btn.btn-primary.btn-large(disabled) Verify Model
              
              #verificationResult.result-section(style='display:none')
                // Result will be injected here

    // Footer
    footer.footer
      .container
        p.footer-text
          | Built on 
          strong Midnight Network
          |  - Privacy-First Blockchain with 
          strong A2D Security
        p.footer-links
          a(href='https://midnight.network', target='_blank') Learn More
          span  | 
          a(href='https://docs.midnight.network', target='_blank') Documentation

    // Scripts
    script(type='module', src='/js/dist/crypto-utils.js')
    script(type='module', src='/js/dist/wallet-connector.js')
    script(type='module', src='/js/dist/a2d-client.js')
    script(type='module', src='/js/dist/app.js')
//- doctype html
//- html(lang='en')
//-   head
//-     meta(charset='UTF-8')
//-     meta(name='viewport', content='width=device-width, initial-scale=1.0')
//-     title AI Model Trust Registry - Midnight Network
//-     link(rel='stylesheet', href='/css/styles.css')
//-     //- script(src='https://cdn.jsdelivr.net/npm/@noble/hashes@1.3.3/sha256.min.js')
  
//-   body
//-     // Header
//-     header.header
//-       .container
//-         .header-content
//-           .logo
//-             span.logo-icon üõ°Ô∏è
//-             h1.logo-text AI Model Trust Registry
          
//-           .wallet-section
//-             if walletConnected
//-               .wallet-info
//-                 span.wallet-label Connected:
//-                 span.wallet-address= walletAddress
//-                 button.btn.btn-secondary#disconnectBtn Disconnect
//-             else
//-               button.btn.btn-primary#connectWalletBtn Connect Lace Wallet

//-     // Navigation Tabs
//-     nav.tabs
//-       .container
//-         button.tab.active(data-tab='register') Register Model
//-         button.tab(data-tab='verify') Verify Model
//-         //- button.tab(data-tab='browse') Browse Registry

//-     // Main Content
//-     main.main-content
//-       .container
        
//-         // Register Model Section
//-         section#registerSection.tab-content.active
//-           .card
//-             h2.card-title
//-               span.icon üì§
//-               | Register Your AI Model
            
//-             p.description
//-               | Register your AI model on the blockchain with zero-knowledge proof verification.
//-               br
//-               strong Your model file never leaves your computer!
            
//-             .form-section
//-               .file-upload-area#registerDropZone
//-                 .upload-icon üìÅ
//-                 p.upload-text
//-                   | Drop your model file here or 
//-                   label.file-label
//-                     | click to browse
//-                     input#registerFileInput(type='file', accept='.pkl,.pt,.pth,.safetensors,.onnx,.h5')
//-                 p.upload-hint Supported formats: PyTorch (.pt, .pth), SafeTensors, ONNX, HDF5
              
//-               #registerFileInfo.file-info(style='display:none')
//-                 .info-item
//-                   span.label File Name:
//-                   span#registerFileName.value -
//-                 .info-item
//-                   span.label File Size:
//-                   span#registerFileSize.value -
//-                 .info-item
//-                   span.label Model Hash:
//-                   span#registerFileHash.value Computing...
                
//-                 .warning-box
//-                   span.warning-icon ‚ö†Ô∏è
//-                   | Your model will NOT be uploaded. Only a cryptographic hash and zero-knowledge proof will be sent to the blockchain.
                
//-                 .form-group
//-                   label(for='creatorName') Creator/Organization Name (Optional)
//-                   input#creatorName.input(type='text', placeholder='e.g., Your Lab Name')
                
//-                 .form-group
//-                   label(for='modelDescription') Model Description (Optional)
//-                   textarea#modelDescription.input(rows='3', placeholder='Brief description of your model...')
                
//-                 #registerProgress.progress-section(style='display:none')
//-                   .progress-bar
//-                     .progress-fill#registerProgressBar
//-                   p#registerProgressText.progress-text Computing hash...
                
//-                 button#registerSubmitBtn.btn.btn-primary.btn-large(disabled) Register Model

//-         // Verify Model Section
//-         section#verifySection.tab-content
//-           .card
//-             h2.card-title
//-               span.icon üîç
//-               | Verify AI Model Integrity
            
//-             p.description
//-               | Check if a model has been registered and verified on the blockchain.
//-               br
//-               | This helps you ensure the model hasn't been tampered with.
            
//-             .form-section
//-               .file-upload-area#verifyDropZone
//-                 .upload-icon üìÅ
//-                 p.upload-text
//-                   | Drop your downloaded model file here or 
//-                   label.file-label
//-                     | click to browse
//-                     input#verifyFileInput(type='file', accept='.pkl,.pt,.pth,.safetensors,.onnx,.h5')
              
//-               #verifyFileInfo.file-info(style='display:none')
//-                 .info-item
//-                   span.label File Name:
//-                   span#verifyFileName.value -
//-                 .info-item
//-                   span.label File Size:
//-                   span#verifyFileSize.value -
//-                 .info-item
//-                   span.label Computing Hash:
//-                   span#verifyFileHash.value Please wait...
                
//-                 #verifyProgress.progress-section(style='display:none')
//-                   .progress-bar
//-                     .progress-fill#verifyProgressBar
//-                   p#verifyProgressText.progress-text Computing hash...
                
//-                 button#verifySubmitBtn.btn.btn-primary.btn-large(disabled) Verify Model
              
//-               #verificationResult.result-section(style='display:none')
//-                 // Result will be injected here by JavaScript

//-         // Browse Registry Section
//-         section#browseSection.tab-content
//-           .card
//-             h2.card-title
//-               span.icon üìã
//-               | Browse Registered Models
            
//-             .search-section
//-               input#searchInput.input.search-input(type='text', placeholder='Search by model hash or creator...')
//-               button#searchBtn.btn.btn-primary Search
            
//-             .stats-section
//-               .stat-card
//-                 .stat-value#totalModels 0
//-                 .stat-label Total Registered Models
              
//-               .stat-card
//-                 .stat-value#verifiedModels 0
//-                 .stat-label Verified Models
              
//-               .stat-card
//-                 .stat-value#totalAttestations 0
//-                 .stat-label Total Attestations
            
//-             #modelsList.models-list
//-               .loading-spinner
//-                 .spinner
//-                 p Loading registry...

//-     // Footer
//-     footer.footer
//-       .container
//-         p.footer-text
//-           | Built on 
//-           strong Midnight Network
//-           |  - Privacy-First Blockchain
//-         p.footer-links
//-           a(href='https://midnight.network', target='_blank') Learn More
//-           span  | 
//-           a(href='https://docs.midnight.network', target='_blank') Documentation
//-           span  | 
//-           a(href='https://github.com/midnightntwrk', target='_blank') GitHub

//-     // Scripts - loaded as ES modules
//-     script(type='module', src='/js/dist/crypto-utils.js')
//-     script(type='module', src='/js/dist/wallet-connector.js')
//-     script(type='module', src='/js/dist/app.js')
